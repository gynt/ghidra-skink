{% from "macros/wrap_namespaces.j2" import wrap_namespaces with context %}
{% from "macros/includes.j2" import includes %}
{% from "macros/usings.j2" import usings %}
{%- set ns = (namespace_path.split('::') if namespace_path is string else namespace_path)
              | reject('equalto','') | list -%}
{%- set ns_ = (namespace_path.replace('::', "__")) -%}


{{ includes(include_paths) }}

{%- call wrap_namespaces(ns) -%}

{{ usings(using_paths) }}

{% for method in methods %}
// FUNCTION: {{ context.reccmp_binary }} {{ '0x%08X' % method.address }}
{{ method.returnType }} {{ class_name }}::{{ method.name }}({{ method.parameters | join(', ') }}) {
  {% set addr = 'ADDRESS_' + context.abbreviation + '_' + context.hash + '_' + ('0x%08X' % method.address ) -%}
  {%- set all_parameters = [class_name + " * _this"] + method.parameters -%}
  {%- set all_parameter_names = ["this"] + method.parameter_names -%}
  return (({{ method.returnType }} (__thiscall * const)({{ all_parameters | join(', ') }})) {{ addr }})({{ all_parameter_names | join(', ') }});
}
{% endfor %}

{%- endcall -%}
